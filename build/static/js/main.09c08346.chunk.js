(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},74:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(39),r=n.n(a),o=n(36),i=(n(53),n(26)),u=n(9),l=n(20),j=n.n(l),d=(n(55),n(48)),b=(n(56),n(57),n(31)),f=n.n(b),m=n(1),O=function(e){var t=e.messageText,n=e.className,s=e.socketid;return"message other"===n?Object(m.jsxs)("li",{className:n,children:[Object(m.jsx)("div",{className:"messageLabel",children:s}),Object(m.jsxs)("div",{className:"messageText",children:[" ",t," "]})]},f()()):"message own"===n?Object(m.jsxs)("li",{className:n,children:[" ",Object(m.jsx)("div",{className:"messageText",children:t})," "]},f()()):Object(m.jsx)("li",{className:"message",children:Object(m.jsx)("div",{className:"notice",children:t})},f()())},g=n(46),p=Object(g.a)(),h=function(e){var t=e.user,n=Object(s.useState)([]),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){return console.log("user value in messages.js: ".concat(t)),p.emit("enteredChat",t),p.on("new message",(function(e){var t=e.className,n=e.username,s=e.messageText;r((function(e){return[].concat(Object(d.a)(e),[{className:t,username:n,messageText:s}])}))})),p.on("updateMessageList",(function(e){r(e)})),function(){return p.emit("leaveChat",t)}}),[t]),Object(m.jsx)("ul",{id:"messages",children:a.map((function(e){return Object(m.jsx)(O,{messageText:e.messageText,className:e.className,username:e.username},Math.floor(100*Math.random()))}))})},x=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1];if(Object(s.useEffect)((function(){p.on("updateUserList",(function(e){console.log("users: ".concat(e)),c(e)}))}),[]),n)return Object(m.jsx)("ul",{id:"users",children:n.map((function(e){return Object(m.jsx)("li",{className:"user",children:e},Math.floor(100*Math.random()))}))})},v=n(2),N=(n(74),function(e,t,n){var s=JSON.stringify({username:t,password:n});return console.log("toSend: ".concat(s)),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((function(e){return e.json()}))}),w=function(e){var t=e.setUser,n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),l=Object(u.a)(o,2),d=l[0],b=l[1],f=Object(s.useState)(""),O=Object(u.a)(f,2),g=O[0],p=O[1],h=Object(s.useState)(""),x=Object(u.a)(h,2),w=x[0],S=x[1],y=Object(v.d)();Object(s.useEffect)((function(){(g||w)&&(r(""),b("")),(a||d)&&(p(""),S(""))}),[a,d,g,w]);var C=function(){var e=Object(i.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,N("/loginUser",a,d);case 3:e.sent?(t(a),console.log("login.jsx: setting user to '".concat(a,"'")),alert("Login successful"),y.push("/"),window.location.reload()):alert("Login unsuccessful"),r(""),b("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==g&&""!==w){e.next=4;break}return alert("All fields are required"),e.abrupt("return");case 4:return e.next=6,N("/registerUser",g,w);case 6:e.sent?(t(g),console.log("login.jsx: setting user to '".concat(g,"'")),alert("Register successful"),y.push("/"),window.location.reload()):alert("User already exists. Register unsuccessful 1"),p(""),S("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"vertical-bar"}),Object(m.jsxs)("form",{id:"login",children:[Object(m.jsx)("div",{className:"separator",children:"Sign up"}),Object(m.jsx)("input",{type:"text",className:"login-input",placeholder:"Username",value:g,onChange:function(e){return p(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"login-input",placeholder:"Password",value:w,onChange:function(e){return S(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"login-input",placeholder:"Confirm Password"}),Object(m.jsx)("button",{className:"login-button",onClick:k,children:"Sign up"}),Object(m.jsx)("div",{className:"separator",children:"Log in (no password for guest)"}),Object(m.jsx)("input",{type:"text",className:"login-input",placeholder:"Username",value:a,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"login-input",placeholder:"Password",value:d,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("button",{className:"login-button",onClick:C,children:"Sign in"})]}),Object(m.jsx)("div",{className:"vertical-bar"})]})},S=(n(79),n(47)),y=function(e){var t=e.user,n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1];return Object(m.jsxs)("form",{id:"form",onSubmit:function(e){e.preventDefault(),a&&(console.log("To send: ".concat(t,", ").concat(a)),p.emit("client message",{username:t,messageText:a}),r(""))},children:[Object(m.jsx)("input",{name:"message",id:"input",autoComplete:"off",value:a,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("button",{id:"message-button",children:Object(m.jsx)(S.a,{})})]})};n(80);var C=function(){var e=function(e,t){var n=Object(s.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(s){return console.log(s),t}})),c=Object(u.a)(n,2),a=c[0],r=c[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(s){console.log(s)}}]}("user","not logged in"),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(null),r=Object(u.a)(a,2),o=r[0],l=r[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(i.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/vibecheck",{method:"GET",headers:{"Content-Type":"application/json",withCredentials:!0}}).then((function(e){e.ok?(console.log("cookie accepted"),l(!0)):(console.log("cookie rejected"),l(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(s.useEffect)((function(){console.log("User value in app.js: ".concat(n))}),[n]),null===o?"Loading...":!1===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"sidebar"}),Object(m.jsx)("div",{className:"content",children:Object(m.jsx)(w,{setUser:c})}),Object(m.jsx)("div",{className:"sidebar"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"sidebar",id:"user-sidebar",children:Object(m.jsx)(x,{})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)(h,{user:n}),Object(m.jsx)(y,{user:n})]}),Object(m.jsx)("div",{className:"sidebar"})]})};r.a.render(Object(m.jsx)(o.a,{children:Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(C,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.09c08346.chunk.js.map