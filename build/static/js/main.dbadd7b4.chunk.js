(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},119:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),c=s(56),r=s.n(c),i=s(18),o=(s(65),s(2)),u=s(7),l=(s(66),s(60)),j=(s(67),s(68),s(25)),d=s.n(j),b=s(1),m=function(e){var t=e.messageText,s=e.className,n=e.socketid;return"message other"===s?Object(b.jsxs)("li",{className:s,children:[Object(b.jsx)("div",{className:"messageLabel",children:n}),Object(b.jsxs)("div",{className:"messageText",children:[" ",t," "]})]},d()()):"message own"===s?Object(b.jsxs)("li",{className:s,children:[" ",Object(b.jsx)("div",{className:"messageText",children:t})," "]},d()()):Object(b.jsx)("li",{className:"message",children:Object(b.jsx)("div",{className:"notice",children:t})},d()())},O=s(57),f=Object(O.io)("ws://localhost:3000"),p=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){f.emit("enteredChat"),f.on("new message",(function(e){var t=e.className,s=e.messageText,n=e.username;a((function(e){return[].concat(Object(l.a)(e),[{className:t,messageText:s,username:n}])}))})),f.on("updateMessageList",(function(e){a(e)}))}),[]),Object(b.jsx)("ul",{id:"messages",children:s.map((function(e){return Object(b.jsx)(m,{messageText:e.messageText,className:e.className,username:e.username})}))})},x=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),s=t[0],a=t[1];if(Object(n.useEffect)((function(){f.on("updateUserList",(function(e){a(e)}))}),[]),s)return Object(b.jsx)("ul",{id:"users",children:s.map((function(e){return Object(b.jsx)("li",{className:"user",children:e.username},e.id)}))})},h=s(20),g=s.n(h),v=s(37),N=(s(112),s(36)),w=s.n(N),S=function(e,t,s){var n=JSON.stringify({username:t,password:s});return console.log("toSend: ".concat(n)),fetch("http://localhost:3000"+e,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()}))},y=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(""),r=Object(u.a)(c,2),i=r[0],l=r[1],j=Object(n.useState)(""),d=Object(u.a)(j,2),m=d[0],O=d[1],f=Object(n.useState)(""),p=Object(u.a)(f,2),x=p[0],h=p[1],N=Object(o.e)();Object(n.useEffect)((function(){fetch("/logout",{method:"POST"})}),[]),Object(n.useEffect)((function(){(m||x)&&(a(""),l("")),(s||i)&&(O(""),h(""))}),[s,i,m,x]);var w=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S("/loginUser",s,i);case 3:e.sent?(alert("Login successful"),N.push("/"),window.location.reload()):alert("Login unsuccessful"),a(""),l("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==m&&""!==x){e.next=4;break}return alert("All fields are required"),e.abrupt("return");case 4:return e.next=6,S("/registerUser",m,x);case 6:e.sent?(alert("Register successful"),N.push("/"),window.location.reload()):alert("User already exists. Register unsuccessful 1"),O(""),h("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"vertical-bar"}),Object(b.jsxs)("form",{id:"login",children:[Object(b.jsx)("div",{className:"separator",children:"Sign up"}),Object(b.jsx)("input",{type:"text",className:"login-input",placeholder:"Username",value:m,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("input",{type:"password",className:"login-input",placeholder:"Password",value:x,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("input",{type:"password",className:"login-input",placeholder:"Confirm Password"}),Object(b.jsx)("button",{className:"login-button",onClick:y,children:"Sign up"}),Object(b.jsx)("div",{className:"separator",children:"Log in (no password for guest)"}),Object(b.jsx)("input",{type:"text",className:"login-input",placeholder:"Username",value:s,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("input",{type:"password",className:"login-input",placeholder:"Password",value:i,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)("button",{className:"login-button",onClick:w,children:"Sign in"})]}),Object(b.jsx)("div",{className:"vertical-bar"})]})},C=(s(117),s(59)),T=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),s=t[0],a=t[1];return Object(b.jsxs)("form",{id:"form",onSubmit:function(e){e.preventDefault(),s&&(f.emit("new message",s),a(""))},children:[Object(b.jsx)("input",{name:"message",id:"input",autoComplete:"off",value:s,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("button",{id:"message-button",children:Object(b.jsx)(C.a,{})})]})},k=(s(118),function(){var e=Object(o.e)();return w.a.get("connect.sid")||(console.log("no cookie so serving login"),e.push("/login")),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(i.a,{children:[Object(b.jsxs)(o.a,{path:"/login",children:[Object(b.jsx)("div",{className:"sidebar"}),Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(y,{})}),Object(b.jsx)("div",{className:"sidebar"})]}),Object(b.jsxs)(o.a,{exact:!0,path:"/",children:[Object(b.jsx)("div",{className:"sidebar",id:"user-sidebar",children:Object(b.jsx)(x,{})}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)(p,{}),Object(b.jsx)(T,{})]}),Object(b.jsx)("div",{className:"sidebar"})]})]})})});r.a.render(Object(b.jsx)(i.a,{children:Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(k,{})})}),document.getElementById("root"))},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){}},[[119,1,2]]]);
//# sourceMappingURL=main.dbadd7b4.chunk.js.map